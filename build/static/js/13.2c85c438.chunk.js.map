{"version":3,"sources":["api/index.js","components/pages/Homepage/index.js"],"names":["getTodayCovidData","a","axios","get","states_data","india_data","data","splice","responseObj","confirmed_total","new_positive","confirmed_daily","positive","active_cases_total","new_active","active_cases_daily","active","recovered_total","new_cured","recovered_daily","cured","death_total","new_death","death_daily","death","states","forEach","state","push","state_name","state_code","sort","firstEl","secondEl","parseInt","getTotalCovidData","alldata","timeline","reverse","map","time","index","date","dateObj","updated_at","confirmed","new_confirmed","recovered","new_recovered","deaths","new_deaths","code","name","population","Table","lazy","retry","MapSwitcher","Graph","TableLoader","Homepage","useState","setData","allData","setAllData","donughtLabel","setDonughtLabel","donughtDailyData","setDonughtDailyData","donughtTotalData","setDonughtTotalData","useEffect","then","className","fallback","handleMapSwitch","statistics","console","log"],"mappings":"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","file":"static/js/13.2c85c438.chunk.js","sourcesContent":["import axios from 'axios';\n\nexport async function getTodayCovidData() {\n  const states_data =  await axios.get('https://www.mohfw.gov.in/data/datanew.json');\n  const india_data = states_data.data.splice(-1)[0];\n  const responseObj = {\n    confirmed_total: india_data.new_positive,\n    confirmed_daily: india_data.new_positive-india_data.positive,\n    active_cases_total: india_data.new_active,\n    active_cases_daily: india_data.new_active - india_data.active,\n    recovered_total: india_data.new_cured,\n    recovered_daily: india_data.new_cured - india_data.cured,\n    death_total: india_data.new_death,\n    death_daily: india_data.new_death - india_data.death,\n    states: []\n  }\n  states_data.data.forEach(state => {\n    responseObj.states.push({\n      state_name: state.state_name,\n      state_code: state.state_code,\n      confirmed_total: state.new_positive,\n      confirmed_daily: state.new_positive - state.positive,\n      active_cases_total: state.new_active,\n      active_cases_daily: state.new_active - state.active,\n      recovered_total: state.new_cured,\n      recovered_daily: state.new_cured - state.cured,\n      death_total: state.new_death,\n      death_daily: state.new_death - state.death\n    });\n  });\n\n  responseObj.states.sort((firstEl, secondEl) => {\n    if(parseInt(firstEl['confirmed_total']) < parseInt(secondEl['confirmed_total'])) return 1;\n    if(parseInt(firstEl['confirmed_total']) > parseInt(secondEl['confirmed_total'])) return -1;\n    return 0;\n  });\n\n  return responseObj;\n}\n\nexport async function getTotalCovidData() {\n  const alldata =  await axios.get('https://corona-api.com/countries/IN');\n  const responseObj = alldata.data.data;\n  const timeline = responseObj.timeline.reverse().map((time, index) => {\n    const active_cases_daily = index>0? time.active - responseObj.timeline[index-1].active :time.active;\n    return {\n      date: time.date,\n      dateObj: time.updated_at,\n      confirmed_total: time.confirmed,\n      confirmed_daily: time.new_confirmed,\n      active_cases_total: time.active,\n      active_cases_daily,\n      recovered_total: time.recovered,\n      recovered_daily: time.new_recovered,\n      death_total: time.deaths,\n      death_daily: time.new_deaths\n    }\n  });\n  return {\n    code: responseObj.code,\n    name: responseObj.name,\n    population: responseObj.population,\n    timeline\n  };\n}\n","import React, { lazy, useEffect, useState, Suspense } from 'react';\n\nimport { getTodayCovidData, getTotalCovidData } from '../../../api';\nimport { retry } from '../../../utils/commonFunctions';\nimport './index.scss';\n\nconst Table = lazy(() => retry(() => import('../../organisms/Table')));\nconst MapSwitcher = lazy(() => retry(() => import('../../organisms/MapSwitcher')));\nconst Graph = lazy(() => retry(() => import('../../organisms/Graph')));\nconst TableLoader = lazy(() => retry(() => import('../../molecules/TableLoader')));\n\nfunction Homepage() {\n  const [data, setData] = useState(null);\n  const [allData, setAllData] = useState(null);\n  const [donughtLabel, setDonughtLabel] = useState([]);\n  const [donughtDailyData, setDonughtDailyData] = useState([]);\n  const [donughtTotalData, setDonughtTotalData] = useState([]);\n\n  useEffect(() => {\n    retry(getTodayCovidData).then(data => {\n      setDonughtLabel(data.states.map(state => state.state_name));\n      setDonughtDailyData(data.states.map(state => parseInt(state.active_cases_daily)));\n      setDonughtTotalData(data.states.map(state => parseInt(state.active_cases_total)));\n      setData(data);\n    });\n    retry(getTotalCovidData).then(setAllData);\n  }, []);\n\n  const handleMapSwitch = statistics => {\n    console.log(statistics);\n    setDonughtDailyData(data.states.map(state => parseInt(state[`${statistics}_daily`])));\n    setDonughtTotalData(data.states.map(state => parseInt(state[`${statistics}_total`])));\n  }\n\n  return <div className='Homepage'>\n    {data && (\n      <Suspense fallback={<TableLoader />}>\n        <div className='homepage-left-pane'>\n          <MapSwitcher data={data} handleMapSwitch={handleMapSwitch}/>\n          <Table {...{data}}/>\n        </div>\n        <div className='homepage-right-pane'>\n          <Graph \n            timeline={allData? allData.timeline: []}\n            donughtLabel={donughtLabel}\n            donughtDailyData={donughtDailyData}\n            donughtTotalData={donughtTotalData}\n          />\n        </div>\n      </Suspense>\n    )}\n  </div>\n}\n\nexport default Homepage;\n"],"sourceRoot":""}